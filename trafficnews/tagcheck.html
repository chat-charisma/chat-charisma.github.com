<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=1056">
<title>乗りものニュース リファラでタグ切り替えテスト</title>

<script type='text/javascript'>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
  (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') +
      '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
  })();
</script>

<!-- ここからヘッダ部に追加してもらうnew add header start -->
<script type='text/javascript'>
  var refset = [
    { refurl: '', refdata: 'default', },
    { refurl: 'headlines.yahoo.co.jp', refdata: 'yahoo' },
    { refurl: 'news.yahoo.co.jp', refdata: 'yahoo' },
    { refurl: 'smartnews.be', refdata: 'smartnews' },
    { refurl: 'smartnews.com', refdata: 'smartnews' },
    { refurl: 'm.facebook.com', refdata: 'facebook' },
  ];
  var dataset = [
    {
      refname:'default',
      chgtag:[
        {
          label:"/62532913/7312_乗りものニュース_S_320100_title_nssl",
          id:"div-gpt-ad-1441704189148-0",
        },
        {
          label:"/62532913/7312_乗りものニュース_S_300250_kiji_nssl",
          id:"div-gpt-ad-1441704189148-2",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_footer_7312",
          id:"div-gpt-ad-1441704189148-1",
        },
      ],
    },
    {
      refname:'yahoo',
      chgtag:[
        {
          label:"/62532913/7312_乗りものニュース_S_320100_title_nssl",
          id:"div-gpt-ad-1441703841112-0",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_kijisita_73120",
          id:"div-gpt-ad-1441703841112-1",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_footer_7312",
          id:"div-gpt-ad-1441703841112-2",
        },
      ],
    },
    {
      refname:'smartnews',
      chgtag:[
        {
          label:"/62532913/7312_乗りものニュース_S_320100_title_nssl",
          id:"div-gpt-ad-1441703940383-0",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_kijisita_73121",
          id:"div-gpt-ad-1441703940383-2",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_footer_7312",
          id:"div-gpt-ad-1441703940383-1",
        },
      ],
    },
    {
      refname:'facebook',
      chgtag:[
        {
          label:"/62532913/7312_乗りものニュース_S_320100_title_nssl",
          id:"div-gpt-ad-1441704102665-0",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_kijisita_73122",
          id:"div-gpt-ad-1441704102665-2",
        },
        {
          label:"/62532913/s_乗りものニュース_300x250_footer_7312",
          id:"div-gpt-ad-1441704102665-1",
        },
      ],
    },
  ];
  function load(){
    var ref = document.referrer,
        selref = refset[0],
        strurl = selref.refurl,
        chgtags = dataset[0].chgtag,
        seltitle = chgtags[0],
        selartical = chgtags[1],
        selfooter = chgtags[2],
        title_label = seltitle.label,
        title_id = seltitle.id,
        artical_label = selartical.label,
        artical_id = selartical.id,
        footer_label = selfooter.label,
        footer_id = selfooter.id,
        refcnt = 0,
        datacnt = 0,
        pattern = "",
        datas = "";
    if(ref!=""){
      for(refcnt = 0; refcnt < refset.length; refcnt++){
        strurl = refset[refcnt].refurl;
        if(strurl !== ""){
          pattern = new RegExp(encodeURI(strurl));
          if(ref.match(pattern)) datas = refset[refcnt].refdata;
        };
      };
    }
    for(datacnt = 0; datacnt < dataset.length; datacnt++){
      chkstr = dataset[datacnt].refname;
      if(datas === chkstr){
        chgtags = dataset[datacnt].chgtag;
        seltitle = chgtags[0];
        selartical = chgtags[1];
        selfooter = chgtags[2];
        title_label = seltitle.label;
        title_id = seltitle.id;
        artical_label = selartical.label;
        artical_id = selartical.id;
        footer_label = selfooter.label;
        footer_id = selfooter.id;
      }
    };
    googletag.cmd.push(function() {
      googletag.defineSlot(title_label, [320, 100], title_id).addService(googletag.pubads());
      googletag.defineSlot(footer_label, [300, 250], footer_id).addService(googletag.pubads());
      googletag.defineSlot(artical_label, [300, 250], artical_id).addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
    var tg = document.getElementById('div-gpt-ad-title'),
        ta = document.getElementById('div-gpt-ad-artical'),
        tf = document.getElementById('div-gpt-ad-footer'),
        stg,sta,stf,
        tgsrc,tasrc,tfsrc,
        tgdata,tadata,tfdata;
    stg = document.createElement('script');
    sta = document.createElement('script');
    stf = document.createElement('script');
    stg.setAttribute("type", "text/javascript");
    sta.setAttribute("type", "text/javascript");
    stf.setAttribute("type", "text/javascript");
    tgsrc = "googletag.cmd.push(function() { googletag.display('" + title_id + "'); });";
    tasrc = "googletag.cmd.push(function() { googletag.display('" + artical_id + "'); });";
    tfsrc = "googletag.cmd.push(function() { googletag.display('" + footer_id + "'); });";
    stgdoc = document.createTextNode(tgsrc);
    stadoc = document.createTextNode(tasrc);
    stfdoc = document.createTextNode(tfsrc);
    stg.appendChild(stgdoc);
    sta.appendChild(stadoc);
    stf.appendChild(stfdoc);
    tg.id = title_id;
    ta.id = artical_id;
    tf.id = footer_id;
    if(tg!=null)tg.appendChild(stg);
    if(ta!=null)ta.appendChild(sta);
    if(tf!=null)tf.appendChild(stf);
  };
  (function(){
    if(document.addEventListener){
      document.addEventListener("DOMContentLoaded", load, false);
    } else if(window.attachEvent){
      window.attachEvent("onload", load);
    } else {
      window.onload = load;
    }
  })();
</script>
<!-- ここまでヘッダ部に追加してもらうnew add header end   -->

</head>

<body>
<!-- ここから表示部に追加してもらうnew add Tag body start -->

・タイトル下
<!-- /62532913/7312_乗りものニュース_S_320100_title_nssl -->
<div id='div-gpt-ad-title' style='height:100px; width:320px;'></div>

・記事下
<!-- /62532913/7312_乗りものニュース_S_300250_kiji_nssl -->
<div id='div-gpt-ad-artical' style='height:250px; width:300px;'></div>

・フッター
<!-- /62532913/s_乗りものニュース_300x250_footer_7312 -->
<div id='div-gpt-ad-footer' style='height:250px; width:300px;'></div>

<!-- ここまで表示部に追加してもらうnew add Tag body end   -->

</body>
</html>
